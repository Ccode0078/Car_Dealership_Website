{% extends "base_generic.html" %}
{% load static %}

{% block title %}Car Listings | Trusted Auto Houston{% endblock %}

{% block css %}
<style>
  /* Page theme + layout */
  body.listings-page { background-color:#121212; padding-top:56px; color:#fff; }
  main.flex-grow-1 { display:block; }
  footer.site-footer { background:#0f0f0f; color:#d9d9d9; }
  footer.site-footer a { color:#d9d9d9; text-decoration:none; }
  footer.site-footer a:hover { color:#fff; text-decoration:none; }
  footer.site-footer ul { margin:0; padding-left:0; list-style:none; }

  /* Cards */
  .custom-card { border-radius:10px; overflow:hidden; transition:transform .2s; min-height:150px; }
  .custom-card:hover { transform:scale(1.05); }

  /* keep cards bright on dark bg */
  .listings-page .card { background:#fff !important; color:#000 !important; }
</style>
{% endblock %}

{% block content %}
  <div id="navbar-placeholder"></div>

  <main class="flex-grow-1 listings-page">
    <!-- Hero -->
    <div class="hero-image">
      <div class="hero-text">
        <h1 class="typewriter">Explore Our Latest Models</h1>
      </div>
    </div>

    <!-- Listings -->
    <div class="container-fluid py-4">
      <div class="row">
        {% for listing in listings %}
          <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
            <div class="card h-100 custom-card"
                 style="background: linear-gradient(0deg, rgb(237,237,236) 0%, rgba(212,207,195,0.5) 100%) !important; box-shadow: 0 8px 16px rgba(0,0,0,0.2);">
              <a href="{% url 'car_details' listing.id %}">
                <img src="{{ listing.image.url }}" class="card-img-top" alt="{{ listing.name }}" style="height:200px; object-fit:cover;">
              </a>
              <div class="card-body">
                <h5 class="card-title">{{ listing.name }}</h5>
                <p class="card-text">Model: {{ listing.brand }}</p>
                <p class="card-text">Mileage: {{ listing.milage }}</p>
              </div>
            </div>
          </div>
        {% empty %}
          <div class="col-12">
            <p class="text-light pl-3 mb-0">No listings available</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </main>

  <footer id="footer" class="site-footer mt-auto"></footer>
{% endblock %}

{% block js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // navbar
    fetch("{% static 'nav_bar.html' %}")
      .then(r => { if (!r.ok) throw new Error(r.status); return r.text(); })
      .then(html => { document.getElementById('navbar-placeholder').innerHTML = html; })
      .catch(err => console.error('Navbar load error:', err));

    // footer
    fetch("{% static 'footer.html' %}")
      .then(r => { if (!r.ok) throw new Error(r.status); return r.text(); })
      .then(html => {
        const el = document.getElementById('footer');
        el.innerHTML = html;
        el.querySelectorAll('ul').forEach(ul => ul.classList.add('list-unstyled'));
      })
      .catch(err => console.error('Footer load error:', err));
  });
</script>
{% endblock %}



